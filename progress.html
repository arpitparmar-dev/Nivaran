<button 
  class="update-btn" 
  style="margin-top:10px; background:#962d2d; font-size:10px; padding:8px; height:auto;"
  onclick="handleLogout()">
  ðŸšª SIGN OUT
</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCKav6YcbmYnX0OkzdDabF3SonOKB_BW-s",
  authDomain: "nivaran-62268.firebaseapp.com",
  projectId: "nivaran-62268",
  storageBucket: "nivaran-62268.firebasestorage.app",
  messagingSenderId: "435713174677",
  appId: "1:435713174677:web:06f681ab823906f6ccff9c"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Check if user is actually logged in
onAuthStateChanged(auth, (user) => {
  const isGuest = sessionStorage.getItem("guest") === "true";
  if (!user && !isGuest) {
    window.location.replace("auth.html");
  }
});

// Real sign out logic
window.handleLogout = async function() {
  try {
    await signOut(auth);
    sessionStorage.removeItem("guest");
    window.location.replace("auth.html");
  } catch (e) {
    console.error("Logout failed", e);
  }
};
</script>
